[app]
# Loglevel can be one of: debug, info, warning, error, critical
loglevel=debug

[database]
# Dsn for database connection
dsn=postgresql+psycopg://postgres:postgres@postgres:5432/postgres
# Retry backoff (in seconds) for database connection
retry_backoff=0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 4.8, 6.4, 10.0
# Connection pool size, use 0 for unlimited connections
pool_size=5
# Max overflow for connection pool
max_overflow=10
# Pre ping the connection before using it
pool_pre_ping=False
# Recycle the connection after this time (in seconds)
pool_recycle=1800

[pseudonym_api]
endpoint=http://localhost:8504
timeout=10
# mtls_cert=secrets/ssl/pseudonym_api.cert
# mtls_key=secrets/ssl/pseudonym_api.key
# verify_ca=secrets/ssl/pseudonym_api_ca.cert

[telemetry]
# Telemetry is enabled or not
enabled = True
# Endpoint to GRPC server for telemetry
endpoint = http://tracing:4317
# Service name to use
service_name = Nationale Verwijsindex
# Tracer name to use
tracer_name = zmodules.service.national_referral_index

[stats]
# Statsd is enabled or not
enabled = True
# Host for statsd server
host = 127.0.0.1
# Port for statsd server
port = 8125
# Module name for statsd
module_name = localisation

[uvicorn]
# If true, the api docs will be enabled
swagger_enabled = True
# Endpoint for swagger api docs
docs_url = /docs
# Endpoint for redoc api docs
redoc_url = /redocs
# Host for the uvicorn server
host = 0.0.0.0
# Port for the uvicorn server
port = 8501
# Live reload for uvicorn server
reload = True

# SSL configuration
use_ssl = False
ssl_base_dir = secrets/ssl
ssl_cert_file = server.cert
ssl_key_file = server.key

[client_oauth]
enabled = True
override_ura_number = 12345600
audience = nvi.service
issuer = https://localhost:8443/
jwks_url = https://localhost:8443/oauth/jwks.json
mtls_cert = secrets/ssl/client_oauth.cert
mtls_key =  secrets/ssl/client_oauth.key
verify_ca = secrets/ssl/client_oauth_ca.cert

# Section for configuring the INCOMING OAuth connections (from external services to this service)
[oauth]
enabled = True
# If not enabled, we assume this URA number is what is calling our service
override_ura_number = 11112222

# Audience that an incoming OAuth should have
audience = nvi.service
# The issuer that issued the incoming OAuth tokens
issuer = 
# The URL to fetch the JWKS keys for validating incoming tokens
jwks_url = 
# Any MTLS settings for connecting to the oauth server (to fetch JWKS keys)
mtls_cert = secrets/epd-1.ldn.crt
mtls_key =  secrets/epd-1.ldn.key
verify_ca = secrets/ca.ldn.crt

# Section for configuring the OUTGOING OAuth connections (from this service to external services)
[client_oauth]
# If not enabled, we don't connect to OAuth and thus we never add a Bearer JWT token to the called service
enabled = True
# The OAuth server that we will connect to to fetch an access token
issuer = https://localhost:8443/
# Any MTLS settings for connecting to the oauth server (to fetch access tokens)
mtls_cert = secrets/client-uzi.crt
mtls_key =  secrets/client-uzi.key
verify_ca =
